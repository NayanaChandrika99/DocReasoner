# Production Environment Configuration Template
# Copy this file to .env.production and fill in actual values

# ============================================================================
# APPLICATION
# ============================================================================
APP_NAME=reasoning-service
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO

# ============================================================================
# API SERVER
# ============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# ============================================================================
# DATABASE (PostgreSQL)
# ============================================================================
# Format: postgresql://user:password@host:port/database
# Use connection pooler for production (e.g., PgBouncer, Supabase Pooler)
DATABASE_URL=postgresql://user:password@host:5432/reasoning_service
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# ============================================================================
# REDIS CACHE
# ============================================================================
REDIS_URL=redis://redis-host:6379/0
REDIS_TTL=3600  # 1 hour

# ============================================================================
# PAGEINDEX API
# ============================================================================
# Get your API key from https://pageindex.ai
PAGEINDEX_API_KEY=your_pageindex_api_key_here
PAGEINDEX_BASE_URL=https://api.pageindex.ai
PAGEINDEX_TIMEOUT=30

# ============================================================================
# RETRIEVAL SETTINGS
# ============================================================================
LLM_TREE_SEARCH_ENABLED=true
HYBRID_TREE_SEARCH_THRESHOLD=0.15
NODE_SPAN_TOKEN_THRESHOLD=2000
BM25_SHORTLIST_SIZE=20
RERANKER_TOP_K=5
RERANKER_MODEL=cross-encoder/ms-marco-MiniLM-L6-v2

# ============================================================================
# REACT CONTROLLER
# ============================================================================
CONTROLLER_MODEL=mistral-7b-instruct
CONTROLLER_TEMPERATURE=0.1
CONTROLLER_MAX_ITERATIONS=10
REACT_USE_LLM_CONTROLLER=false
REACT_SHADOW_MODE=false
REACT_FALLBACK_ENABLED=true
REACT_AB_TEST_RATIO=0.0

# ============================================================================
# GEPA / Prompt Optimization
# ============================================================================
GEPA_ENABLED=true
GEPA_AUTO_MODE=medium
GEPA_MAX_ITERATIONS=150
GEPA_TARGET_SCORE=0.8
GEPA_REFLECTION_MODEL=gpt-4o
GEPA_TASK_MODEL=gpt-4o-mini
GEPA_DATASET_PATH=tests/data/cases

# ============================================================================
# SAFETY & CALIBRATION
# ============================================================================
TEMPERATURE_SCALING_ENABLED=true
SELF_CONSISTENCY_ENABLED=true
SELF_CONSISTENCY_K=3
SELF_CONSISTENCY_THRESHOLD=0.7
CONFORMAL_ALPHA=0.1
HIGH_IMPACT_CONFIDENCE_THRESHOLD=0.85

# ============================================================================
# PERFORMANCE
# ============================================================================
MAX_CONCURRENT_REQUESTS=100
REQUEST_TIMEOUT=30
TARGET_P50_LATENCY=5.0
TARGET_P95_LATENCY=15.0

# ============================================================================
# OBSERVABILITY
# ============================================================================
METRICS_ENABLED=true
TRACING_ENABLED=true
TRACING_SAMPLE_RATE=0.1

# ============================================================================
# SECURITY (Optional)
# ============================================================================
# API_KEY_HEADER=X-API-Key
# CORS_ORIGINS=https://your-frontend.com,https://admin.your-domain.com
# RATE_LIMIT_PER_MINUTE=60
